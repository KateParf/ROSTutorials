Рабочее пространство — это каталог, содержащий пакеты ROS 2. Перед использованием ROS 2 необходимо указать источник рабочего пространства установки ROS 2 в терминале, в котором вы планируете работать. Это сделает пакеты ROS 2 доступными для использования в этом терминале.
У вас также есть возможность поиска «overlay» — вторичного рабочего пространства, в котором вы можете добавлять новые пакеты, не мешая существующему рабочему пространству ROS 2, которое вы расширяете, или «underlay». Ваш underlay должен содержать зависимости всех пакетов в вашем overlay. Пакеты в вашем overlay будут переопределять пакеты в underlay. Также возможно иметь несколько слоев underlays и overlays, при этом каждый последующий overlay будет использовать пакеты своих родительских underlays.

**Задачи**

**1 Исходная среда ROS 2**

Ваша основная установка ROS 2 будет основой для этого руководства. (Помните, что основа не обязательно должна быть основной установкой ROS 2.)
В зависимости от того, как вы установили ROS 2 (из исходного кода или двоичных файлов), а также от того, на какой платформе вы работаете, точная исходная команда будет отличаться:

~~~
source /opt/ros/rolling/setup.bash
~~~

---

**2 Создайте новый каталог**

Лучше всего создавать новый каталог для каждого нового рабочего пространства. Имя не имеет значения, но полезно, чтобы оно указывало на цель рабочего пространства. Давайте выберем имя каталога ros2_wsдля «development workspace»:

~~~
mkdir -p ~/ros2_ws/src
cd ~/ros2_ws/src
~~~

---

**3 Клонировать образец репозитория**

ros2_ws/srcПеред клонированием убедитесь, что вы все еще находитесь в каталоге.

В остальных руководствах для начинающих разработчиков вы создадите свои собственные пакеты, но сейчас вы попрактикуетесь в создании рабочего пространства с использованием существующих пакетов.

Если вы ознакомились с учебными пособиями « Новичок: инструменты CLI» , то вы знакомы с turtlesimодним из пакетов в ros_tutorials .

У репозитория может быть несколько ветвей. Вам нужно проверить ту, которая нацелена на ваш установленный дистрибутив ROS 2. Когда вы клонируете этот репозиторий, добавьте -bаргумент, за которым следует эта ветвь.

В ros2_ws/srcкаталоге выполните следующую команду:

~~~
git clone https://github.com/ros/ros_tutorials.git -b rolling
~~~

![image (20)](https://github.com/user-attachments/assets/d57f9cfa-a074-42de-a3c4-15a84d1756f0)


Теперь ros_tutorialsклонирован в вашем рабочем пространстве. ros_tutorialsРепозиторий содержит turtlesimпакет, который мы будем использовать в оставшейся части этого руководства. Другие пакеты в этом репозитории не собираются, поскольку они содержат COLCON_IGNOREфайл.

До сих пор вы заполняли свое рабочее пространство образцом пакета, но это еще не полностью функциональное рабочее пространство. Сначала вам нужно разрешить зависимости, а затем построить рабочее пространство.

---

**4. Устранение зависимостей**

Перед сборкой рабочего пространства вам необходимо разрешить зависимости пакетов. У вас уже могут быть все зависимости, но лучше всего проверять наличие зависимостей каждый раз при клонировании. Вы бы не хотели, чтобы сборка завершилась неудачей после долгого ожидания, а потом выяснялось, что у вас отсутствуют зависимости.

Из корня вашего рабочего пространства ( ros2_ws) выполните следующую команду:

~~~
# cd if you're still in the ``src`` directory with the ``ros_tutorials`` clone
cd ..
rosdep install -i --from-path src --rosdistro rolling -y
~~~

Если вы установили ROS 2 на Linux из исходного кода или бинарного архива, вам нужно будет использовать команду rosdep из их инструкций по установке. Вот раздел from-source rosdep и раздел бинарного архива rosdep .

Если у вас уже есть все зависимости, консоль вернет:

~~~
All required rosdeps installed successfully
~~~

Пакеты объявляют свои зависимости в файле package.xml (вы узнаете больше о пакетах в следующем руководстве). Эта команда проходит по этим объявлениям и устанавливает те, которые отсутствуют. Вы можете узнать больше rosdepв другом руководстве (скоро).

---

**5. Создайте рабочее пространство с помощью colcon**

Из корня вашего рабочего пространства ( ros2_ws) теперь вы можете собирать свои пакеты с помощью команды:

~~~
colcon build
~~~

Консоль вернет следующее сообщение:

![image (21)](https://github.com/user-attachments/assets/9ff821b8-9317-40d8-bee7-0ae101e44336)

После завершения сборки введите команду в корне рабочей области ( ~/ros2_ws):

~~~
ls
~~~

И вы увидите, что colcon создал новые каталоги:

~~~
build  install  log  src
~~~

![image (22)](https://github.com/user-attachments/assets/d4f8fbf4-4137-4904-87f4-5f72b5713097)

В этом installкаталоге находятся файлы настроек вашего рабочего пространства, которые вы можете использовать в качестве источника наложения.

---

**6 Источник наложения**

Перед тем как искать оверлей, очень важно открыть новый терминал, отдельный от того, где вы построили рабочее пространство. Поиск оверлея в том же терминале, где вы его построили, или аналогичное создание там, где он был найден, может создать сложные проблемы.

В новом терминале укажите основную среду ROS 2 в качестве «подложки», чтобы можно было создать оверлей «поверх» нее:

~~~
source /opt/ros/rolling/setup.bash
~~~

Перейдите в корень вашего рабочего пространства:

~~~
cd ~/ros2_ws
~~~

В корневом каталоге укажите источник вашего оверлея:

~~~
source install/local_setup.bash
~~~

Теперь вы можете запустить turtlesimпакет из оверлея:

~~~
ros2 run turtlesim turtlesim_node
~~~

Но как узнать, что это запущенный оверлейный Turtlesim, а не ваш основной Turtlesim?

Давайте изменим turtlesim в оверлее, чтобы вы могли увидеть эффекты:

Вы можете изменять и перестраивать пакеты в оверлее отдельно от подложки.

Наложение имеет приоритет над подложкой.
